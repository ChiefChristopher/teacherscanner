import {
  type BottomSheetScrollViewMethods,
  createBottomSheetScrollableComponent,
  SCROLLABLE_TYPE,
} from '@gorhom/bottom-sheet';
import { type BottomSheetScrollViewProps } from '@gorhom/bottom-sheet/src/components/bottomSheetScrollable/types';
import { memo } from 'react';
import { type KeyboardAwareScrollViewProps } from 'react-native-keyboard-controller';
import { KeyboardAwareScrollView } from 'react-native-keyboard-controller';
import Reanimated from 'react-native-reanimated';

const AnimatedKeyboardAwareScrollView = Reanimated.createAnimatedComponent<
  KeyboardAwareScrollViewProps & BottomSheetScrollViewProps
>(KeyboardAwareScrollView);

// Completely bypass generic and constructor check
const BottomSheetScrollable = createBottomSheetScrollableComponent(
  SCROLLABLE_TYPE.SCROLLVIEW,
  AnimatedKeyboardAwareScrollView
);

const BottomSheetKeyboardAwareScrollView = memo(BottomSheetScrollable);

BottomSheetKeyboardAwareScrollView.displayName = 'BottomSheetKeyboardAwareScrollView';

export default BottomSheetKeyboardAwareScrollView;